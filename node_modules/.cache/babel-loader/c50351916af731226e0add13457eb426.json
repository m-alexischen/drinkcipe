{"ast":null,"code":"var _jsxFileName = \"/Users/alexis/Desktop/duo/src/pages/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport { login, signup } from '../../components/lib/api';\nimport classes from './Login.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confrimPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSignUp, setIsSignUp] = useState(true);\n  const ctx = useContext(AuthContext);\n\n  const usernameChangeHandler = event => {\n    event.preventDefault();\n    setUsername(event.target.value);\n  };\n\n  const emailChangeHandler = event => {\n    event.preventDefault();\n    setEmail(event.target.value);\n  };\n\n  const passwordChangeHandler = event => {\n    event.preventDefault();\n    setPassword(event.target.value);\n  };\n\n  const confirmPasswordChangeHandler = event => {\n    event.preventDefault();\n    setConfirmPassword(event.target.value);\n  };\n\n  const switchAuthModeHandler = () => {\n    setIsSignUp(prevState => !prevState);\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n    setIsLoading(true); // sign in + expiration time count down\n    // sign up + return a success message + back to sign in + expiration time \n\n    if (!isSignUp) {\n      login({\n        email: email,\n        password: password\n      }).then(data => {\n        const expirationTime = new Date(new Date().getTime() + +data.expiresIn * 1000);\n        ctx.login(data.token, expirationTime.toISOString());\n        setIsLoading(false);\n        navigate('/');\n      }).catch(err => {\n        alert(err.message);\n      });\n    } else {\n      if (confrimPassword !== password) {\n        let errorMessage = 'Authentication failed!';\n        return alert(errorMessage);\n      }\n\n      ;\n      signup({\n        username: username,\n        email: email,\n        password: password,\n        role: ['ROLE_USER']\n      }).then(data => {\n        alert('Sign Up Successfully!');\n        setIsLoading(false);\n      });\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: !isSignUp ? 'Login' : 'Sign Up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [isSignUp && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: username,\n          minLength: \"2\",\n          required: true,\n          onChange: usernameChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: email,\n          required: true,\n          onChange: emailChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          required: true,\n          onChange: passwordChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), isSignUp && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"confirmPassword\",\n          required: true,\n          onChange: confirmPasswordChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [!isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n          children: !isSignUp ? 'Login' : 'Create Account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sending request...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: classes.toggle,\n          onClick: switchAuthModeHandler,\n          children: !isSignUp ? 'Create new account' : 'Login with existing account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"7OtjN309Wjt7EJOUaaaznw7tpH0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/alexis/Desktop/duo/src/pages/Login/Login.js"],"names":["useState","useContext","useNavigate","AuthContext","login","signup","classes","Login","navigate","username","setUsername","email","setEmail","password","setPassword","confrimPassword","setConfirmPassword","isLoading","setIsLoading","isSignUp","setIsSignUp","ctx","usernameChangeHandler","event","preventDefault","target","value","emailChangeHandler","passwordChangeHandler","confirmPasswordChangeHandler","switchAuthModeHandler","prevState","submitHandler","then","data","expirationTime","Date","getTime","expiresIn","token","toISOString","catch","err","alert","message","errorMessage","role","auth","control","actions","toggle"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport { login, signup } from '../../components/lib/api';\nimport classes from './Login.module.css';\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const [username, setUsername] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [confrimPassword, setConfirmPassword] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isSignUp, setIsSignUp] = useState(true);\n\n    const ctx = useContext(AuthContext);\n\n    const usernameChangeHandler = (event) => {\n        event.preventDefault();\n        setUsername(event.target.value);\n    };\n    \n    const emailChangeHandler = (event) => {\n        event.preventDefault();\n        setEmail(event.target.value);\n    };\n\n    const passwordChangeHandler = (event) => {\n        event.preventDefault();\n        setPassword(event.target.value);\n    };\n\n    const confirmPasswordChangeHandler = (event) => {\n        event.preventDefault();\n        setConfirmPassword(event.target.value);\n    };\n\n    const switchAuthModeHandler = () => {\n        setIsSignUp((prevState) => !prevState);\n    };\n\n    const submitHandler = (event) => {\n        event.preventDefault();\n\n        setIsLoading(true);\n        // sign in + expiration time count down\n        // sign up + return a success message + back to sign in + expiration time \n        if (!isSignUp) {\n            login({\n                email: email,\n                password: password,\n            }).then((data) => {\n                const expirationTime = new Date((new Date().getTime() + (+data.expiresIn * 1000)));\n                ctx.login(data.token, expirationTime.toISOString());\n                setIsLoading(false);\n                navigate('/');\n            })\n            .catch((err) => {\n                alert(err.message);\n            });\n        } else {\n            if (confrimPassword !== password) {\n                let errorMessage = 'Authentication failed!';\n                return alert(errorMessage);\n            };\n\n            signup({\n                username: username,\n                email: email,\n                password: password,\n                role: ['ROLE_USER'],\n            }).then((data) => {\n                alert('Sign Up Successfully!');\n                setIsLoading(false);\n            });\n        };\n    };\n\n    return (\n        <section className={classes.auth}>\n            <h1>{!isSignUp ? 'Login' : 'Sign Up'}</h1>\n            <form onSubmit={submitHandler}>\n                {isSignUp && (\n                    <div className={classes.control}>\n                        <label htmlFor='username'>Username</label>\n                        <input\n                            type='text'\n                            name='username'\n                            value={username}\n                            minLength='2'\n                            required\n                            onChange={usernameChangeHandler}\n                        />\n                    </div>\n                )}\n                <div className={classes.control}>\n                    <label htmlFor='email'>Your Email</label>\n                    <input \n                        type='email' \n                        name='email' \n                        value={email}\n                        required \n                        onChange={emailChangeHandler}\n                    />\n                </div>\n                <div className={classes.control}>\n                    <label htmlFor='password'>Your Password</label>\n                    <input\n                        type='password'\n                        name='password'\n                        value={password}\n                        required\n                        onChange={passwordChangeHandler}\n                    />\n                </div>\n                {isSignUp && (\n                    <div className={classes.control}>\n                        <label htmlFor='password'>Confirm Password</label>\n                        <input\n                            type='password'\n                            name='confirmPassword'\n                            required\n                            onChange={confirmPasswordChangeHandler}\n                        />\n                    </div>\n                )}\n                <div className={classes.actions}>\n                    {!isLoading && (<button>{!isSignUp ? 'Login' : 'Create Account'}</button>)}\n                    {isLoading && <p>Sending request...</p>}\n                    <button\n                        type='button'\n                        className={classes.toggle}\n                        onClick={switchAuthModeHandler}\n                    >\n                        {!isSignUp ? 'Create new account' : 'Login with existing account'}\n                    </button>\n                </div>\n            </form>\n        </section>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}