{"ast":null,"code":"var _jsxFileName = \"/Users/alexis/Desktop/duo/src/pages/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport classes from './Login.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confrimPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLogin, setIsLogin] = useState(true);\n  const ctx = useContext(AuthContext);\n\n  const usernameChangeHandler = event => {\n    event.preventDefault();\n    setUsername(event.target.value);\n  };\n\n  const emailChangeHandler = event => {\n    event.preventDefault();\n    setEmail(event.target.value);\n  };\n\n  const passwordChangeHandler = event => {\n    event.preventDefault();\n    setPassword(event.target.value);\n  };\n\n  const confirmPasswordChangeHandler = event => {\n    event.preventDefault();\n    setConfirmPassword(event.target.value);\n  };\n\n  const switchAuthModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n\n    const dataFetchHandler = url => {\n      fetch(url, {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email,\n          password: password\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        setIsLoading(false);\n\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.json().then(data => {\n            let errorMessage = 'Authentication failed!';\n            throw new Error(errorMessage);\n          });\n        }\n\n        ;\n      }).then(data => {\n        const expirationTime = new Date(new Date().getTime() + +data.expiresIn * 1000);\n        ctx.login(data.idToken, expirationTime.toISOString());\n        console.log(ctx.login(data.idToken));\n        navigate('/');\n      }).catch(err => {\n        alert(err.message);\n      });\n    };\n\n    setIsLoading(true);\n\n    if (isLogin) {\n      dataFetchHandler('http://localhost:3001/api/auth/signin');\n    } else {\n      if (confrimPassword !== password) {\n        let errorMessage = 'Authentication failed!';\n        return alert(errorMessage);\n      }\n\n      ;\n      dataFetchHandler('http://localhost:3001/api/auth/signup');\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isLogin ? 'Login' : 'Sign Up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [!isLogin && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: username,\n          minLength: \"2\",\n          required: true,\n          onChange: usernameChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: email,\n          required: true,\n          onChange: emailChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          required: true,\n          onChange: passwordChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), !isLogin && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"confirmPassword\",\n          required: true,\n          onChange: confirmPasswordChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [!isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n          children: isLogin ? 'Login' : 'Create Account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 37\n        }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sending request...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: classes.toggle,\n          onClick: switchAuthModeHandler,\n          children: isLogin ? 'Create new account' : 'Login with existing account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"/iaLEIU/1IHsWPoAj4k81xGehvg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/alexis/Desktop/duo/src/pages/Login/Login.js"],"names":["useState","useContext","useNavigate","AuthContext","classes","Login","navigate","username","setUsername","email","setEmail","password","setPassword","confrimPassword","setConfirmPassword","isLoading","setIsLoading","isLogin","setIsLogin","ctx","usernameChangeHandler","event","preventDefault","target","value","emailChangeHandler","passwordChangeHandler","confirmPasswordChangeHandler","switchAuthModeHandler","prevState","submitHandler","dataFetchHandler","url","fetch","method","body","JSON","stringify","headers","then","res","ok","json","data","errorMessage","Error","expirationTime","Date","getTime","expiresIn","login","idToken","toISOString","console","log","catch","err","alert","message","auth","control","actions","toggle"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport classes from './Login.module.css';\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const [username, setUsername] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [confrimPassword, setConfirmPassword] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isLogin, setIsLogin] = useState(true);\n\n    const ctx = useContext(AuthContext);\n\n    const usernameChangeHandler = (event) => {\n        event.preventDefault();\n        setUsername(event.target.value);\n    };\n    \n    const emailChangeHandler = (event) => {\n        event.preventDefault();\n        setEmail(event.target.value);\n    };\n\n    const passwordChangeHandler = (event) => {\n        event.preventDefault();\n        setPassword(event.target.value);\n    };\n\n    const confirmPasswordChangeHandler = (event) => {\n        event.preventDefault();\n        setConfirmPassword(event.target.value);\n    };\n\n    const switchAuthModeHandler = () => {\n        setIsLogin((prevState) => !prevState);\n    };\n\n    const submitHandler = (event) => {\n        event.preventDefault();\n\n        const dataFetchHandler = (url) => {\n            fetch(url, {\n                method: 'POST',\n                body: JSON.stringify({\n                    email: email,\n                    password: password,\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then((res) => {\n                setIsLoading(false);\n                if (res.ok) {\n                    return res.json();\n                } else {\n                    return res.json().then((data) => {\n                        let errorMessage = 'Authentication failed!';\n                        \n                        throw new Error(errorMessage);\n                    });\n                };\n            }).then((data) => {\n                const expirationTime = new Date((new Date().getTime() + (+data.expiresIn * 1000)));\n                ctx.login(data.idToken, expirationTime.toISOString());\n                console.log(ctx.login(data.idToken));\n                navigate('/');\n            })\n            .catch((err) => {\n                alert(err.message);\n            });\n        };\n\n        setIsLoading(true);\n        \n        if (isLogin) {\n            dataFetchHandler('http://localhost:3001/api/auth/signin');\n        } else {\n            if (confrimPassword !== password) {\n                let errorMessage = 'Authentication failed!';\n                return alert(errorMessage);\n            };\n\n            dataFetchHandler('http://localhost:3001/api/auth/signup');\n        };\n    };\n\n    return (\n        <section className={classes.auth}>\n            <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n            <form onSubmit={submitHandler}>\n                {!isLogin && (\n                    <div className={classes.control}>\n                        <label htmlFor='username'>Username</label>\n                        <input\n                            type='text'\n                            name='username'\n                            value={username}\n                            minLength='2'\n                            required\n                            onChange={usernameChangeHandler}\n                        />\n                    </div>\n                )}\n                <div className={classes.control}>\n                    <label htmlFor='email'>Your Email</label>\n                    <input \n                        type='email' \n                        name='email' \n                        value={email}\n                        required \n                        onChange={emailChangeHandler}\n                    />\n                </div>\n                <div className={classes.control}>\n                    <label htmlFor='password'>Your Password</label>\n                    <input\n                        type='password'\n                        name='password'\n                        value={password}\n                        required\n                        onChange={passwordChangeHandler}\n                    />\n                </div>\n                {!isLogin && (\n                    <div className={classes.control}>\n                        <label htmlFor='password'>Confirm Password</label>\n                        <input\n                            type='password'\n                            name='confirmPassword'\n                            required\n                            onChange={confirmPasswordChangeHandler}\n                        />\n                    </div>\n                )}\n                <div className={classes.actions}>\n                    {!isLoading && (<button>{isLogin ? 'Login' : 'Create Account'}</button>)}\n                    {isLoading && <p>Sending request...</p>}\n                    <button\n                        type='button'\n                        className={classes.toggle}\n                        onClick={switchAuthModeHandler}\n                    >\n                        {isLogin ? 'Create new account' : 'Login with existing account'}\n                    </button>\n                </div>\n            </form>\n        </section>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}